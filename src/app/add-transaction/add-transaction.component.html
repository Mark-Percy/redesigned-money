<h4>Add Transaction</h4>
<form [formGroup]="transactionForm">
  <mat-form-field>
    <mat-label>Date</mat-label>
    <input matInput [matDatepicker]="picker" formControlName="transactionDate">
    <mat-hint>DD/MM/YYYY</mat-hint>
    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-datepicker #picker></mat-datepicker>
  </mat-form-field>
  <mat-form-field>
    <mat-label>Account</mat-label>
    <mat-select formControlName="account">
      <mat-option *ngFor="let account of accounts | async" value="{{ account.name }}">{{ account.name }}</mat-option>
    </mat-select>
  </mat-form-field>
  <mat-form-field>
    <mat-label>Category</mat-label>
    <mat-select formControlName="category">
      <mat-option value="bills">Bills</mat-option>
      <mat-option value="spending">Spending</mat-option>
      <mat-option value="useless">Useless</mat-option>
    </mat-select>
  </mat-form-field>
  <mat-form-field *ngIf="showFreq">
    <mat-label>Frequency</mat-label>
    <mat-select formControlName="frequency">
      <mat-option value="Annually">Annually</mat-option>
      <mat-option value="Monthly">Monthly</mat-option>
    </mat-select>
  </mat-form-field>
  <mat-form-field>
    <mat-label>Location</mat-label>
    <input type="text" matInput formControlName="location" name="location">
  </mat-form-field>
  <section formArrayName="items" *ngIf="!update">
  <div *ngFor="let item of items.controls; let i=index">
    <div [formGroupName]="i">
      <mat-form-field>
        <mat-label>item</mat-label>
        <input type="text" formControlName="item" matInput name="item">
      </mat-form-field>
      <mat-form-field>
        <mat-label>Amount</mat-label>
        <input type="number" formControlName="amount" matInput name="amount">
        <span matPrefix>&#163;</span>
      </mat-form-field>
    </div>
  </div>
  </section>
  <section class="buttons">
    <button mat-flat-button color="primary" (click)="addTransaction()" *ngIf="!update; else updateButton">Submit</button>
    <ng-template #updateButton>
      <button mat-flat-button color="primary" (click)="updateTransaction(formPrefill.id)">Update</button>
      <button mat-flat-button color="warn" (click)="deleteTransaction()"><mat-icon>delete</mat-icon></button>
    </ng-template>
    <button mat-flat-button (click)="addItem()" *ngIf="!update">Add Field</button>
  </section>
</form>
